<html><head><link rel="import" href="../../bower_components/polymer/polymer.html?v=6.1.100">

<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html?v=6.1.100">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html?v=6.1.100">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html?v=6.1.100">
<link rel="import" href="../../bower_components/iron-image/iron-image.html?v=6.1.100">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html?v=6.1.100">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html?v=6.1.100">
<link rel="import" href="../../bower_components/iron-signals/iron-signals.html?v=6.1.100">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html?v=6.1.100">

<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html?v=6.1.100">
<link rel="import" href="../../bower_components/paper-button/paper-button.html?v=6.1.100">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html?v=6.1.100">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html?v=6.1.100">
<link rel="import" href="../../bower_components/paper-material/paper-material.html?v=6.1.100">

<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html?v=6.1.100">

<link rel="import" href="../oav-behaviors/app-helpers.html?v=6.1.100">
<link rel="import" href="../oav-ajax/oav-ajax.html?v=6.1.100">

</head><body><dom-module id="oav-select-voting-area">
  <style include="iron-flex iron-flex-alignment">

    :host {
      width: 100%;
      height: 100%;
      background-color: var(--app-main-backround-color);

    }

    #area_options {
      background-color: var(--app-main-backround-color);
      @apply(--layout-horizontal);
      @apply(--layout-center-center);
    }

    h3 {
      font-size: 18px;
      padding: 16px;
    }

    paper-fab {
      padding: 32px;
      color: #FFF;
    }

    paper-fab.label {
      font-size: 30px;
      color: #FFF;
    }

    .infoImage {
      width: 400px;
      height: 225px;
    }

    .infoImageContainer {
      background-color: #852989 !important;
    }

    @media (max-width: 940px) {
      .infoImageContainer {
        display: none;
      }
    }

    .topMaterial {
      width: 400px;
      height: 225px;
      background-color: #FFF;
      margin: 32px;
    }

    .mainContainer {
      background-color: var(--app-main-backround-color);
    }

    .imageContainer {
      height: 280px;
      width: 100%;
      @apply(--layout-horizontal);
      @apply(--layout-center-center);
      background-image: url("https://s3-eu-west-1.amazonaws.com/yrpri-eu-direct-assets/oav_argyll_and_bute/abpb3.jpg");
    }

    @media (max-width: 800px) {
      .imageContainer {
        background-image: none;
        background-color: #f9f9f9;
      }
    }

    .selectInfoText {
      font-size: 21px;
      padding: 8px;
      background-color: #1794b2;
      color: #FFF;
      margin: 0;
    }

    .selectInfoTextSmaller {
      font-size: 16px;
      padding: 8px;
    }

    .areaOptions {
      margin-top: 48px;
    }

    .voteNumberForVesturbaer {
      position: absolute;
      top: 244px;
      right: 746px;
      color: #95c11a;
    }

    .voteNumberForMidborg {
      position: absolute;
      top: 356px;
      right: 662px;
      color: #2ba9e0;
    }

    .voteNumberForHlidar {
      position: absolute;
      top: 196px;
      right: 516px;
      color: #f39100;
    }

    .voteNumberForHaaleiti {
      position: absolute;
      top: 332px;
      left: 546px;
      color: #10a19a;
    }

    .voteNumberForLaugardalur {
      position: absolute;
      top: 160px;
      right: 444px;
      color: #be6a95;
    }

    .voteNumberForBreidholt {
      position: absolute;
      bottom: 22px;
      left: 648px;
      color: #0e70b8;
    }

    .voteNumberForArbaer {
      position: absolute;
      bottom: 110px;
      left: 728px;
      color: #bfc005;
    }

    .voteNumberForGrafarvogur {
      position: absolute;
      top: 175px;
      left: 620px;
      color: #da616b;
      direction: ltr;
    }

    .voteNumberForGrafarholt {
      position: absolute;
      bottom: 138px;
      left: 765px;
      color: #cc902f;
    }

    .voteNumberForKjalarnes {
      position: absolute;
      top: 32px;
      right: 358px;
      color: #2aac65;
    }

    .voteNumberGeneral {
      padding-left: 4px;
      font-size: 15px;
    }

    .checkIcon {
      width: 40px;
      height: 40px;
    }

    .voteNumberForVesturbaerMobile {
      background-color: #fcac17;
    }

    .voteNumberForMidborgMobile {
      background-color: #e3414e;
    }

    .voteNumberForHlidarMobile {
      background-color: #0562bf;
    }

    .voteNumberForHaaleitiMobile {
      background-color: #00bcd9;
    }

    .voteNumberForLaugardalurMobile {
      background-color: #f360a4;
    }

    .voteNumberForBreidholtMobile {
      background-color: #ec6925;
    }

    .voteNumberForArbaerMobile {
      background-color: #7e5ca8;
    }

    .voteNumberForGrafarvogurMobile {
      background-color: #9ac93b;
    }

    .voteNumberForGrafarholtMobile {
      background-color: #cc902f;
    }

    .voteNumberForKjalarnesMobile {
      background-color: #2aac65;
    }

    .voteNumberGeneralMobile {
      font-size: 24px;
      margin-left: 4px;
    }

    .checkIconMobile {
      width: 35px;
      height: 35px;
    }

    @media (max-width: 800px) {
      .selectInfoText {
        font-size: 18px;
      }
      .selectInfoTextSmaller {
        font-size: 12px;
      }
    }

    .totalVoters {
      position: absolute;
      bottom: 4px;
      right: 8px;
      color: #888;
    }

    .totalVoterIcon {
      width: 32px;
      height: 32px;
    }

    .totalVoterCount {
      font-size: 19px;
      padding-top: 2px;
      padding-left: 2px;
    }

    .langSelection {
      position: absolute;
      bottom: 8px;
      left: 8px;
      cursor: pointer;
      font-style: italic;
      font-size: 15px;
    }

    .language {
      padding-right: 6px;
    }

    .langImage {
      cursor: pointer;
      margin-right: 8px;
      margin-left: 8px;
    }

    @media (max-width: 800px) {
      .totalVoterCount {
        font-size: 17px;
        padding-left: 0px;
      }

      .totalVoterIcon {
        width: 30px;
        height: 30px;
      }

      .mobileLogo {
        width: 100% !important;
        margin-top: 0;
      }

      .topMaterial {
        max-width: 320px;
        max-height: 120px;
        margin: 16px;
        background-color: #f9f9f9;
      }

      .mobileMaterial {
        width: 290px;
        padding: 16px;
        margin: 0;
        margin-top: 16px;
        color: #FFF;
        font-size: 22px;
        cursor: pointer;
      }

      .mainContainer {
        background-color: #f9f9f9;
      }

      .mobileBackground {
        background-color: #f9f9f9;
        padding-bottom: 64px;
      }

      .imageContainer {
        height: 100%;
        width: 100%;
      }
    }

    .desktopLogo {
      width: 260px;
      height: 120px;
    }

    .logoHolder {
    }

    @media (max-width: 320px) {
      .topMaterial {
        max-width: 300px;
        max-height: 130px;
        margin: 0;
        margin-top: 16px;
      }

      .mobileMaterial {
        width: 270px;
        font-size: 20px;
      }
    }

    .mobileIronImage {
      padding-bottom: 12px;
    }

    .areaOptions a {
      text-decoration: none;
    }

    .mobileBackground a {
      text-decoration: none;
    }

    img[usemap], map area{
      outline: none;
    }

    .extraHeader {
      background-color: #1794b2;
      color: #FFF;
      font-size: 22px;
      padding: 16px;
    }
  </style>

  <template>
    <iron-signals on-iron-signal-set-language="setLanguage"></iron-signals>
    <iron-media-query query="(min-width: 800px)" query-matches="{{wide}}"></iron-media-query>

    <template is="dom-if" if="[[areas]]">

      <div class="layout vertical center-center mainContainer">

        <div class="layout horizontal imageContainer wrap">
          <div class="layout vertical center-center">
            <div class="layout horizontal center-center">
              <img hidden$="[[wide]]" sizing="contain" class="mobileLogo" src="https://s3-eu-west-1.amazonaws.com/oav-direct-assets/AB_2018/communityFund.jpeg">
            </div>
            <paper-material elevation="3" class="topMaterial">
              <div hidden$="[[!wide]]" class="extraHeader">
                Supporting Communities Fund 2018
              </div>
              <div class="selectInfoTextSmaller">
                Click on the area you live in to cast your vote and select projects you want to fund up to the available amount of funding.

                Info on how Argyll and Bute Council will store your data can be found by clicking ? in the top right hand corner.
              </div>
              <template is="dom-if" if="[[totalVoterCount]]">
                <div title$="[[localize('number_of_voters')]]" class="totalVoters layout horizontal"><iron-icon class="totalVoterIcon" icon="verified-user"></iron-icon><div class="totalVoterCount">[[totalVoterCount]]</div></div>
              </template>
            </paper-material>
          </div>

          <paper-material elevation="3" class="topMaterial infoImageContainer" hidden$="[[!wide]]">
            <iron-image width="400" height="225" sizing="cover" class="desktopLogo" src="https://s3-eu-west-1.amazonaws.com/oav-direct-assets/AB_2018/communityFund.jpeg"></iron-image>
          </paper-material>
        </div>

        <template is="dom-if" if="[[wide]]" restamp="">
          <paper-material elevation="5" class="areaOptions">
            <div class="layout vertical center-center">
              <img hidefocus="true" usemap="#image-map" id="imageMapKopavogur" src="https://www.argyll-bute.gov.uk/sites/default/files/abc_main_map_0.gif" border="0" width="512" height="458" orgwidth="512" orgheight="458" alt="">
              <!-- Image Map Generated by http://www.image-map.net/ -->
              <map name="image-map">
                <area target="" alt="Oban, Lorn &amp; The Isles" title="Oban, Lorn &amp; The Isles" href="/#/area-ballot/1" coords="128,5,23,29,25,88,152,152,230,140,247,138,252,166,271,158,285,152,295,155,320,168,345,137,415,118,453,46" shape="poly">
                <area target="" alt="Bute &amp; Cowal" title="Bute &amp; Cowal" href="/#/area-ballot/2" coords="274,230,259,242,271,254,295,256,304,282,352,326,401,246,390,232,331,226" shape="poly">
                <area target="" alt="Helensburgh &amp; Lomond" title="Helensburgh &amp; Lomond" href="/#/area-ballot/3" coords="328,192,317,205,325,221,416,232,513,222,513,199,501,194,417,187,422,144,403,139,397,159,395,195,368,194" shape="poly">
                <area target="" alt="Mid Argyll, Kintyre &amp; Islands" title="Mid Argyll, Kintyre &amp; Islands" href="/#/area-ballot/4" coords="67,251,154,178,232,150,245,157,249,178,270,177,307,188,303,210,258,237,261,249,267,256,283,260,290,267,294,278,303,307,251,452,199,446,89,362" shape="poly">
              </map>
            </div>
            <template is="dom-if" if="[[areaVotedrCount]]" restamp="">
              <a href="/#/area-ballot/1" class="voteNumberForVesturbaer"><div title$="[[localize('number_of_votes')]]" class="layout horizontal"><div class="voteNumberGeneral" style="direction: rtl">[[_getAreaCount(1)]]</div></div></a>
              <a href="/#/area-ballot/2" class="voteNumberForMidborg"><div title$="[[localize('number_of_votes')]]" class="layout horizontal"><div class="voteNumberGeneral">[[_getAreaCount(2)]]</div></div></a>
              <a href="/#/area-ballot/3" class="voteNumberForHlidar"><div title$="[[localize('number_of_votes')]]" class="layout horizontal"><div class="voteNumberGeneral">[[_getAreaCount(3)]]</div></div></a>
              <a href="/#/area-ballot/4" class="voteNumberForHaaleiti"><div title$="[[localize('number_of_votes')]]" class="layout horizontal"><div class="voteNumberGeneral">[[_getAreaCount(4)]]</div></div></a>
            </template>
          </paper-material>
        </template>
      </div>

      <template is="dom-if" if="[[!wide]]">
        <div class="layout vertical center-center mobileBackground">
          <template is="dom-if" if="[[areaVoterCount]]" restamp="">
            <a href="/#/area-ballot/1">
              <paper-material elevation="3" class="mobileMaterial layout horizontal center-center voteNumberForVesturbaerMobile">
                <div>
                  Oban, Lorn &amp; The Isles
                </div>
                <div class="flex"></div>
                <div title$="[[localize('number_of_votes')]]" class="layout horizontal"><iron-icon class="checkIconMobile" icon="verified-user"></iron-icon><div class="voteNumberGeneralMobile">[[_getAreaCount(1)]]</div></div>
              </paper-material>
            </a>

            <a href="/#/area-ballot/2">
              <paper-material elevation="3" class="mobileMaterial layout horizontal center-center voteNumberForMidborgMobile">
                <div>
                  Bute &amp; Cowal
                </div>
                <div class="flex"></div>
                <div title$="[[localize('number_of_votes')]]" class="layout horizontal"><iron-icon class="checkIconMobile" icon="verified-user"></iron-icon><div class="voteNumberGeneralMobile">[[_getAreaCount(2)]]</div></div>
              </paper-material>
            </a>

            <a href="/#/area-ballot/3">
              <paper-material elevation="3" class="mobileMaterial layout horizontal center-center voteNumberForHlidarMobile">
                <div>
                  Helensburgh &amp; Lomond
                </div>
                <div class="flex"></div>
                <div title$="[[localize('number_of_votes')]]" class="layout horizontal"><iron-icon class="checkIconMobile" icon="verified-user"></iron-icon><div class="voteNumberGeneralMobile">[[_getAreaCount(3)]]</div></div>
              </paper-material>
            </a>

            <a href="/#/area-ballot/4">
              <paper-material elevation="3" class="mobileMaterial layout horizontal center-center voteNumberForHaaleitiMobile">
                <div>
                  Mid Argyll, Kintyre &amp; Islands
                </div>
                <div class="flex"></div>
                <div title$="[[localize('number_of_votes')]]" class="layout horizontal"><iron-icon class="checkIconMobile" icon="verified-user"></iron-icon><div class="voteNumberGeneralMobile">[[_getAreaCount(4)]]</div></div>
              </paper-material>
            </a>

          </template>
        </div>
      </template>
    </template>

    <oav-ajax id="getAreasAjax" auto="" url="/votes/get_areas" on-response="_areasResponse"></oav-ajax>
  </template>

</dom-module>

<script>
  (function() {
    Polymer({

      is: 'oav-select-voting-area',

      behaviors: [
        Polymer.appHelpers,
        Polymer.AppLocalizeBehavior
      ],

      properties: {

        areas: {
          type: Array,
          value: []
        },

        imageMapImageUrl: {
          type: String
        },

        imageMapData: {
          type: String
        },

        language: {
          value: 'is'
        },

        wide: Boolean,

        areaVoterCount: Object,
        totalVoterCount: Number
      },

      _onVideoPlay: function () {
        window.appGlobals.activity('video', 'playing');
      },

      refreshAreaCounters: function () {
        this.$.getAreasAjax.generateRequest();
      },

      _selectIcelandic: function () {
        this.fire('iron-signal', {name: 'set-language', data: 'is'});
        localStorage.setItem("selectedLanguage", 'is');
      },

      _selectEnglish: function () {
        this.fire('iron-signal', {name: 'set-language', data: 'en'});
        localStorage.setItem("selectedLanguage", 'en');
      },

      _selectPolish: function () {
        this.fire('iron-signal', {name: 'set-language', data: 'pl'});
        localStorage.setItem("selectedLanguage", 'pl');
      },

      _getAreaCount: function (areaId) {
        return this.formatNumber(this.areaVoterCount[areaId]);
      },

      attached: function() {
        this.loadLanguage(this.resolveUrl('/src/locales.json'));
      },

      _areasResponse: function (event, detail) {
        this.set('areas', detail.response.areas);
        this.set('areaVoterCount', null);
        this.async(function () {
          this.set('areaVoterCount', detail.response.area_voter_count);
          this.set('totalVoterCount', this.formatNumber(detail.response.total_voter_count));
        }.bind(this));

      }
    })
  })();

</script>

</body></html>