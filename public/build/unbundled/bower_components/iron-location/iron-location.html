<html><head><link rel="import" href="../polymer/polymer.html">


<script>!function(){"use strict";Polymer({is:"iron-location",properties:{path:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.search.slice(1))}},hash:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:""},_urlSpaceRegExp:{computed:"_makeRegExp(urlSpaceRegex)"},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:["_updateUrl(path, query, hash)"],attached:function(){this.listen(window,"hashchange","_hashChanged"),this.listen(window,"location-changed","_urlChanged"),this.listen(window,"popstate","_urlChanged"),this.listen(document.body,"click","_globalOnClick"),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,"hashchange","_hashChanged"),this.unlisten(window,"location-changed","_urlChanged"),this.unlisten(window,"popstate","_urlChanged"),this.unlisten(document.body,"click","_globalOnClick"),this._initialized=!1},_hashChanged:function(){this.hash=window.decodeURIComponent(window.location.hash.substring(1))},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.decodeURIComponent(window.location.pathname),this.query=window.decodeURIComponent(window.location.search.substring(1)),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var n=window.encodeURI(this.path).replace(/\#/g,"%23").replace(/\?/g,"%3F"),e="";this.query&&(e="?"+window.encodeURI(this.query).replace(/\#/g,"%23"));var t="";return this.hash&&(t="#"+window.encodeURI(this.hash)),n+e+t},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized&&(this.path!==window.decodeURIComponent(window.location.pathname)||this.query!==window.decodeURIComponent(window.location.search.substring(1))||this.hash!==window.decodeURIComponent(window.location.hash.substring(1)))){var n=this._getUrl(),e=new URL(n,window.location.protocol+"//"+window.location.host).href,t=window.performance.now(),i=this._lastChangedAt+this.dwellTime>t;this._lastChangedAt=t,i?window.history.replaceState({},"",e):window.history.pushState({},"",e),this.fire("location-changed",{},{node:window})}},_globalOnClick:function(n){if(!n.defaultPrevented){var e=this._getSameOriginLinkHref(n);e&&(n.preventDefault(),e!==window.location.href&&(window.history.pushState({},"",e),this.fire("location-changed",{},{node:window})))}},_getSameOriginLinkHref:function(n){if(0!==n.button)return null;if(n.metaKey||n.ctrlKey)return null;for(var e=Polymer.dom(n).path,t=null,i=0;i<e.length;i++){var o=e[i];if("A"===o.tagName&&o.href){t=o;break}}if(!t)return null;if("_blank"===t.target)return null;if(("_top"===t.target||"_parent"===t.target)&&window.top!==window)return null;var a,h=t.href;a=null!=document.baseURI?new URL(h,document.baseURI):new URL(h);var r;if(window.location.origin?r=window.location.origin:(r=window.location.protocol+"//"+window.location.hostname,window.location.port&&(r+=":"+window.location.port)),a.origin!==r)return null;var d=a.pathname+a.search+a.hash;if(this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(d))return null;var l=new URL(d,window.location.href).href;return l},_makeRegExp:function(n){return RegExp(n)}})}();</script>
</head><body></body></html>