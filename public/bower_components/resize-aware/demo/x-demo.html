<link rel="import" href="../resize-aware.html">

<dom-module id="x-demo">
  <template>
    <resize-aware on-element-size-changed="handleChange">
      <div id="tester">
        <p>
          Lorem ipsum.
        </p>
      </div>
    </resize-aware>
    <ul>
      <template is="dom-repeat" items="{{sizeChanges}}">
        <li>
          Changed to [[item.width]] x [[item.height]]
        </li>
      </template>
    </ul>
  </template>
  <script>
    Polymer({
      is: 'x-demo',
      properties: {
        sizeChanges: {
          type: Array,
          notify: true,
          value: function() {
            return [];
          }
        }
      },
      handleChange: function(e) {
        if (this.sizeChanges) {
          this.push('sizeChanges', {
            width: e.detail.value.width,
            height: e.detail.value.height
          });
        }
      },

      ready: function() {

        var t = this.$.tester;
        setTimeout(function() {
          t.innerHTML =
            '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras eget eleifend nunc. Sed nec efficitur leo. Aliquam venenatis eu dui nec molestie. Donec quis bibendum lectus. Vestibulum massa lorem, interdum eu rutrum et, aliquet cursus neque. Donec convallis purus eget egestas posuere. Pellentesque viverra sapien sit amet nisl mollis sodales. Vestibulum tempus tellus quis nibh blandit, quis sodales lectus tincidunt. Nam mollis, eros quis consequat euismod, ex risus feugiat dolor, a dictum libero risus eget enim. Aenean tincidunt ac neque non scelerisque. In consequat, ex sit amet blandit auctor, dui sapien sollicitudin justo, vitae feugiat tortor metus at dui. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas porta mauris non nulla suscipit ultricies. Pellentesque a ornare ante, vestibulum tristique dolor.</p>';
        }, 5000);
        setTimeout(function() {
          t.innerHTML = '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras eget eleifend nunc.</p>';
        }, 10000);
      }
    });
  </script>
</dom-module>
