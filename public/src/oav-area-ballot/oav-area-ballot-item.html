<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../../bower_components/iron-signals/iron-signals.html">

<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-share-button/paper-share-button.html">

<link rel="import" href="../oav-ajax/oav-ajax.html">
<link rel="import" href="oav-area-budget.html">

<dom-module id="oav-area-ballot-item">
  <style>
    .itemContent {
      @apply(--layout-vertical);
      position: relative;
      width: 296px !important;
      height: 360px;
      margin: 16px;
    }

    .itemContent[small] {
      height: 320px;
    }

    .buttons {
      z-index: 5;
    }

    .name3 {
      font-size: 23px;
      background-color: #395d79;
      color: #FFF;
      padding: 16px;
      margin: 0;
      font-weight: bold;
    }

    .nameContainer3 {
      background-color: #395d79;
      margin: 0;
    }


    .name2 {
      font-size: 23px;
      background-color: #f27523;
      color: #FFF;
      padding: 16px;
      margin: 0;
      font-weight: bold;
    }

    .nameContainer {
      background-color: #f27523;
      margin: 0;
    }

    .name {
      font-size: 23px;
      background-color: #06394e;
      color: #FFF;
      padding: 16px;
      margin: 0;
      font-weight: bold;
    }

    .nameContainer {
      background-color: #06394e;
      margin: 0;
    }

    .name[small] {
      font-size: 17px;
      padding-top: 4px;
      padding-right: 4px;
      padding-top: 4px;
    }

    .name[small][tiny] {
      font-size: 14px;
    }

    paper-button {
      position: absolute;
      bottom: 12px;
      left: 80px;
      background-color: var(--app-accent-color);
      color: #fff;
      padding-left: 16px;
      padding-right: 16px;
      font-weight: bold;
    }

    .itemContent {
      background-color: #fbfbfb;
      color: #222;
    }

    .review {
      overflow-y: scroll;
      max-height: 140px;
      padding: 8px;
      margin-top: 8px;
    }

    .review[small] {
      max-height: 110px;
    }

    .nameContainer {
      width: 100%;
    }

    .usage {
      padding: 8px;
      margin-top: 8px;
    }

    paper-tabs {
      margin-top: 8px;
    }
  </style>

  <template>
    <iron-signals on-iron-signal-set-language="setLanguage"></iron-signals>
    <iron-media-query query="(max-width: 360px)" query-matches="{{tiny}}"></iron-media-query>

    <paper-material animated elevation="[[elevation]]" class="itemContent" small$="[[small]]" tiny$="[[tiny]]">
      <div class="layout horizontal center-center nameContainer">
        <div class="name">[[item.name]]</div>
      </div>
      <paper-tabs attr-for-selected="name" selected="{{selected}}">
        <paper-tab name="usage">Dæmi um notkun</paper-tab>
        <paper-tab name="review">Örnafnanefnd</paper-tab>
      </paper-tabs>
      <iron-pages attr-for-selected="name" selected="{{selected}}">
        <section name="usage">
          <div inner-h-t-m-l="[[itemUsage]]" class="usage"></div>
        </section>
        <section name="review">
          <div inner-h-t-m-l="[[itemReview]]" class="review"></div>
        </section>
      </iron-pages>
      <div class="layout horizontal center-center">
        <paper-button raised on-tap="_voteForName">Kjósa nafn</paper-button>
      </div>
    </paper-material>
  </template>
</dom-module>

<script>
  (function() {
    Polymer({

      is: 'oav-area-ballot-item',

      behaviors: [
        Polymer.appHelpers,
        Polymer.AppLocalizeBehavior
      ],

      properties: {
        item: {
          type: Object
        },

        itemUsage: {
          type: String,
          computed: '_itemUsage(item)'
        },

        itemReview: {
          type: String,
          computed: '_itemReview(item)'
        },

        elevation: Number,

        selected: {
          type: String,
          value: "usage"
        }
      },

      _voteForName: function () {
        this.fire('oav-vote-for-name', this.item.id)
      },

      _itemUsage: function (item) {
        if (item && item.description) {
          return item.description.split("---SPLIT---")[0]
        }
      },

      _itemReview: function (item) {
        if (item && item.description) {
          return item.description.split("---SPLIT---")[1]
        }
      },

      attached: function() {
        this.loadLanguage(this.resolveUrl('/src/locales.json'));
      }
    })
  })();

</script>

