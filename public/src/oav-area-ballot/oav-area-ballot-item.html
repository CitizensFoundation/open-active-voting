<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/iron-image/iron-image.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">

<link rel="import" href="../oav-ajax/oav-ajax.html">
<link rel="import" href="oav-area-budget.html">

<dom-module id="oav-area-ballot-item">
  <style>
    .ideaContent {
      @apply(--layout-vertical);
      position: relative;
      width: 300px;
      height: 320px;
      margin: 16px;
    }

    .ideaContent:hover .detail{
      opacity: 1;
    }

    .ideaContent > iron-image {
      height: 169px;
      width: 300px;
    }

    .ideaContent > .detail {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.8) 100%);
      color: white;
      font-size: 20px;
      font-weight: 100;
      padding: 20px;
      opacity: 0;
      transition: opacity 0.1s;
    }

    @media (max-width: 800px) {
      .ideaContent {
        width: auto;
      }
    }

    @media (max-width: 400px) {
      .ideaContainer {
        width: 100%;
      }

      .ideaContent > .detail {
        opacity: 1;
      }
    }

    .name {
      font-size: 21px;
      padding: 8px;
    }

    .description {
      padding-left: 8px;
      padding-rigth: 8px;
    }

    .price {
      font-size: 25px;
      position: absolute;
      bottom: 8px;
      left: 16px;
    }

    paper-fab.addButton {
      position: absolute;
      bottom: 12px;
      right: 16px;
      background-color: var(--paper-yellow-a400);
      color: #333;
    }

    .budgetContainer {
      @apply(--layout-horizontal);
      @apply(--layout-center-center);
    }

    .ideaContent {
      background-color: #888;
    }

    .addButton {

    }

    .infoIcon {
      color: #ddd;
      width: 45px;
      height: 45px;
    }

    .infoLink {
      position: absolute;
      bottom: 4px;
      left: 130px;
    }
  </style>

  <template>
    <paper-material elevation="2" class="ideaContent">
      <iron-image sizing="cover" src="[[idea.imageUrl]]">
      </iron-image>
      <div class="name">[[idea.name]]</div>
      <div class="layout horizontal center-center">
        <div class="price">[[idea.price]]m</div>
      </div>
      <div class="infoLink">
        <a href="https://okkar-kopavogur.betraisland.is/#!/post/7428" target="_blank">
          <paper-icon-button class="infoIcon" icon="info-outline"></paper-icon-button>
        </a>
      </div>
      <div class="addButton">
        <paper-fab mini elevation="5" class="addButton" icon="add" on-tap="_addToBudget">Velja</paper-fab>
      </div>
    </paper-material>
  </template>

</dom-module>

<script>
  (function() {
    Polymer({

      is: 'oav-area-ballot-item',

      behaviors: [
        Polymer.appHelpers,
        Polymer.AppLocalizeBehavior
      ],

      properties: {

        idea: {
          type: Object
        }
      },

      _addToBudget: function (event) {
        this.fire('oav-toggle-idea-in-budget', { idea: this.idea });
      }
    })
  })();

</script>

