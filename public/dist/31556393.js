import{P as e,O as t,a as s,h as o,u as r,_ as i,p as a,c as n}from"./0148e6d4.js";let c,l,h,d,u,g,p,v,Z,m,f=e=>e,T=class extends e{constructor(){super(...arguments),this.hasLoadedCss=!1}static get styles(){return[t,s]}b64DecodeUnicode(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}render(){return this.hasLoadedCss?o(c||(c=f`${0}`),this.wide?o(l||(l=f`${0}`),r(this.setupHTMLText(this.configFromServer.client_config.selectVotingAreaDesktopHTML))):o(h||(h=f`${0}`),r(this.setupHTMLText(this.configFromServer.client_config.selectVotingAreaMobileHTML)))):o(d||(d=f``))}renderTEST(){return this.hasLoadedCss?o(u||(u=f`${0}`),this.wide?o(g||(g=f`${0}`),r(this.replaceInHTMLText(this.testHtmlDesktop()))):o(p||(p=f`${0}`),r(this.replaceInHTMLText(this.testHtmlMobile())))):o(v||(v=f``))}testHtmlMobile(){return""}testHtmlDesktop(){return""}renderText(){return this.hasLoadedCss?o(Z||(Z=f`${0}`),r(this.setupHTMLText(this.getText()))):o(m||(m=f``))}getText(){return"\n    "}refreshAreaCounters(){this.requestUpdate()}setupHTMLText(e){return e=this.b64DecodeUnicode(e),this.replaceInHTMLText(e)}replaceInHTMLText(e){this.configFromServer.areas.forEach((t=>{let s=0;this.configFromServer.area_voter_count&&this.configFromServer.area_voter_count[t.id]&&(s=this.configFromServer.area_voter_count[t.id]),e=e.replace("ZZZareaCount"+t.id+"ZZZ",this.formatNumber(s,void 0,"."))}));let t=this.configFromServer.total_voter_count;return e=(e=(e=(e=(e=e.replace(/ZZZtotalVoterCountZZZ/g,this.formatNumber(t,void 0,"."))).replace("ZZZmainInfoTextZZZ",this.localize("mainInfo"))).replace("ZZZchoose_a_neighbourhood_2ZZZ",this.localize("choose_a_neighbourhood_2"))).replace("ZZZselectAreaTextZZZ",this.localize("selectAreaInfo"))).replace(/ZZZnumber_of_votersZZZ/g,this.localize("number_of_voters"))}setupEvents(){this.$$("#languageSelection").addEventListener("click",this._languageSelection.bind(this)),this.shadowRoot.querySelectorAll("a,area").forEach((e=>{const t=e.href.split("/"),s=t[t.length-1];e.addEventListener("click",(()=>{this._goToAreaId(parseInt(s))})),e.removeAttribute("href"),e.style.cursor="pointer"}))}_goToAreaId(e){const t="/area-ballot/"+e;window.history.pushState({},"",t),this.fire("location-changed",t)}removeEvents(){this.$$("#languageSelection").removeEventListener("click",this._languageSelection.bind(this)),this.shadowRoot.querySelectorAll("a,area").forEach((e=>{e.removeEventListener("click",(()=>{this._goToAreaId(-1)}))}))}firstUpdated(e){super.firstUpdated(e)}updated(e){super.updated(e),e.has("configFromServer")&&this.configFromServer&&(this.hasLoadedCss=!0,setTimeout((()=>{this.setupEvents();const e=this.$$("#"+this.language+"Language");e&&e.classList.add("selectedLanguage")})))}_languageSelection(e){this.language=e.target.id.split("Language")[0],this.fire("oav-set-locale",this.language),setTimeout((()=>{this.$$("#languageSelection").addEventListener("click",this._languageSelection.bind(this))}),100)}disconnectedCallback(){this.removeEvents(),super.disconnectedCallback()}};i([a({type:Boolean})],T.prototype,"hasLoadedCss",void 0),i([a({type:Object})],T.prototype,"configFromServer",void 0),T=i([n("oav-select-voting-area")],T);export{T as OavSelectVotingArea};
