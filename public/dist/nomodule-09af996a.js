System.register(["./nomodule-fc37705a.js","./nomodule-2ae2d011.js","./nomodule-c37596bc.js","./nomodule-af2369db.js"],(function(e,o){var t,r,i,n,s,a,p,c,d,l,u,m,h,g,v,f,y,b,S,C,_,N,z,k,x,j,O,L,$,w,A,T,F,M,B;return{setters:[function(e){t=e.taggedTemplateLiteral,r=e.createSuper,i=e.inherits,n=e.getPrototypeOf,s=e.get,a=e.createClass,p=e.classCallCheck},function(e){c=e.b,d=e.d,l=e.h,u=e._,m=e.p,h=e.c},function(e){},function(e){}],execute:function(){(function(e){return e}),x=c(k||(k=g||(g=t(["paper-dialog{padding-left:8px;padding-right:8px;width:440px;background-color:#fff}paper-dialog{z-index:9999}@media (max-width:480px){paper-dialog{padding:0;margin:0;height:100%;width:100%}}paper-spinner{padding:0;margin:0}.buttons{margin-left:0;padding-left:0;color:var(--app-accent-color);font-size:18px;padding-top:8px}.checkBox{margin-top:16px}paper-input{--paper-input-container-focus-color:var(--app-accent-color)}paper-checkbox{--paper-checkbox-checked-color:var(--app-accent-color);padding-top:8px}.postcodeWrongWard{color:var(--paper-red-a400)}"])))),function(e){return e},e("OavLowSecuritySmsLogin",B=function(e){i(c,e);var o=r(c);function c(){var e;return p(this,c),(e=o.call(this)).userSpinner=!1,e.opened=!1,e.smsCodeSent=!1,e}return a(c,[{key:"render",value:function(){return l(j||(j=v||(v=t([' <paper-dialog id="dialog" with-backdrop> <div class="layout horizontal center-center"> '," </div> ",' <form is="iron-form" id="form"> ',' </form> <div class="buttons layout vertical"> <paper-button autofocus @tap="','">',"</paper-button> </div> </paper-dialog> "]))),this.smsCodeSent?l(O||(O=f||(f=t(["<h2>","</h2> "]))),this.localize("enterSmsCode")):l(L||(L=y||(y=t(["<h2>","</h2>"]))),this.localize("enterYourMobileNumber")),this.smsCodeSent?l($||($=b||(b=t(["<div>","</div>"]))),this.localize("enterSmsCodeDescription")):l(w||(w=S||(S=t(["<div> "," </div>"]))),this.localize("enterYourMobileNumberDescription")),this.smsCodeSent?l(A||(A=C||(C=t([' <paper-input id="smsCode" type="text" label="','" .value="','" minlength="4" .error-message="','"> </paper-input> ']))),this.localize("smsCode"),this.smsCode,this.smsCodeErrorMessage):l(T||(T=_||(_=t([' <paper-input id="smsNumber" type="text" label="','" .value="','" minlength="6" .error-message="','"> </paper-input> ']))),this.localize("mobileNumber"),this.smsNumber,this.smsErrorMessage),this._validateAndSend,this.smsCodeSent?l(F||(F=N||(N=t(["",""]))),this.localize("sendSmsCode")):l(M||(M=z||(z=t(["",""]))),this.localize("sendPhoneNumber")))}},{key:"firstUpdated",value:function(e){s(n(c.prototype),"firstUpdated",this).call(this,e)}},{key:"_resetCorrectArea",value:function(){var e=this;setTimeout((function(){e.correctAreaId=void 0,e.correctAreaName=void 0,e.close()}),100)}},{key:"_loginCompleted",value:function(){this.onLoginFunction(),this.close()}},{key:"open",value:function(e,o,t){this.onLoginFunction=t,this.areaId=e,this.areaName=o,this.userSpinner=!1,this.opened=!1,this.smsNumber="",this.$$("#dialog").open()}},{key:"_validateAndSend",value:function(e){var o=this;return this.smsCodeSent?(this.smsCode=this.$$("#smsCode").value,this.smsCode?(fetch("/votes/sms_login",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({smsCode:this.smsCode})}).then((function(e){return e.json()})).then((function(e){e&&!0===e.ok?o._loginCompleted():o.fire("oav-error",o.localize("error_not_authorized"))})).catch((function(){o.fire("oav-error",o.localize("general_error"))})),!0):(this.fire("oav-error",this.localize("completeForm")),!1)):(this.smsNumber=this.$$("#smsNumber").value,this.smsNumber?(fetch("/votes/send_sms_login_code",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({smsNumber:this.smsNumber})}).then((function(e){return e.json()})).then((function(e){e&&!0===e.ok?o.smsCodeSent=!0:o.fire("oav-error",o.localize("error_not_authorized"))})).catch((function(){o.fire("oav-error",o.localize("general_error"))})),!0):(this.fire("oav-error",this.localize("completeForm")),!1))}},{key:"close",value:function(){var e=this.$$("#dialog");e&&e.close(),this.opened=!1,this.userSpinner=!1}}],[{key:"styles",get:function(){return[x]}}]),c}(d)),u([m({type:Object})],B.prototype,"configFromServer",void 0),u([m({type:Number})],B.prototype,"correctAreaId",void 0),u([m({type:String})],B.prototype,"areaName",void 0),u([m({type:String})],B.prototype,"correctAreaName",void 0),u([m({type:String})],B.prototype,"smsNumber",void 0),u([m({type:Boolean})],B.prototype,"userSpinner",void 0),u([m({type:String})],B.prototype,"smsErrorMessage",void 0),u([m({type:String})],B.prototype,"smsCodeErrorMessage",void 0),u([m({type:String})],B.prototype,"submitText",void 0),u([m({type:Object})],B.prototype,"onLoginFunction",void 0),u([m({type:Number})],B.prototype,"areaId",void 0),u([m({type:String})],B.prototype,"smsCode",void 0),u([m({type:Boolean})],B.prototype,"opened",void 0),u([m({type:Boolean})],B.prototype,"smsCodeSent",void 0),e("OavLowSecuritySmsLogin",B=u([h("oav-low-security-sms-login")],B))}}}));
