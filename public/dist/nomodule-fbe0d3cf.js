System.register(["./nomodule-fc37705a.js","./nomodule-7f51a800.js","./nomodule-ab6ed109.js","./nomodule-839ad7e3.js"],(function(e,t){var o,r,i,n,s,a,p,l,c,d,u,h,m,g,v,f,y,S,b,C,_,N,z,x,k,w,O,L,$,j,B,A,F,M,T;return{setters:[function(e){o=e.taggedTemplateLiteral,r=e.createSuper,i=e.inherits,n=e.getPrototypeOf,s=e.get,a=e.createClass,p=e.classCallCheck},function(e){l=e.b,c=e.d,d=e.h,u=e._,h=e.p,m=e.c},function(e){},function(e){}],execute:function(){(function(e){return e}),k=l(x||(x=g||(g=o(["paper-dialog{padding-left:8px;padding-right:8px;width:440px;background-color:#fff}paper-dialog{z-index:9999}@media (max-width:480px){paper-dialog{padding:0;margin:0;height:100%;width:100%}}paper-spinner{padding:0;margin:0}.buttons{margin-left:0;padding-left:0;color:var(--app-accent-color);font-size:18px;padding-top:8px}.checkBox{margin-top:16px}paper-input{--paper-input-container-focus-color:var(--app-accent-color)}paper-checkbox{--paper-checkbox-checked-color:var(--app-accent-color);padding-top:8px}.postcodeWrongWard{color:var(--paper-red-a400)}"])))),function(e){return e},e("OavLowSecuritySmsLogin",T=function(e){i(l,e);var t=r(l);function l(){var e;return p(this,l),(e=t.call(this)).userSpinner=!1,e.opened=!1,e.smsCodeSent=!1,e}return a(l,[{key:"render",value:function(){return d(w||(w=v||(v=o([' <paper-dialog id="dialog" with-backdrop> <div class="layout horizontal center-center"> '," </div> ",' <form is="iron-form" id="form"> ',' </form> <div class="buttons layout vertical"> <paper-button dialog-dismiss>','</paper-button> <paper-button autofocus @tap="','">',"</paper-button> </div> </paper-dialog> "]))),this.smsCodeSent?d(O||(O=f||(f=o(["<h2>","</h2> "]))),this.localize("enterSmsCode")):d(L||(L=y||(y=o(["<h2>","</h2>"]))),this.localize("enterYourMobileNumber")),this.smsCodeSent?d($||($=S||(S=o(["<div>","</div>"]))),this.localize("enterSmsCodeDescription")):d(j||(j=b||(b=o(["<div> "," </div>"]))),this.localize("enterYourMobileNumberDescription")),this.smsCodeSent?d(B||(B=C||(C=o([' <paper-input id="smsCode" type="text" label="','" .value="','" minlength="4" allowed-pattern="[0-9]" .error-message="','"> </paper-input> ']))),this.localize("smsCode"),this.smsCode,this.smsCodeErrorMessage):d(A||(A=_||(_=o([' <paper-input id="yearOfBirth" type="text" minlength="4" maxlength="4" allowed-pattern="[0-9]" label="','"> </paper-input> <paper-input id="smsNumber" type="text" allowed-pattern="[0-9]" label="','" .value="','" minlength="6" .error-message="','"> </paper-input> ']))),this.localize("lowSecuritySmsLoginYearOfBirth"),this.localize("mobileNumber"),this.smsNumber,this.smsErrorMessage),this.localize("cancel"),this._validateAndSend,this.smsCodeSent?d(F||(F=N||(N=o(["",""]))),this.localize("sendSmsCode")):d(M||(M=z||(z=o(["",""]))),this.localize("sendPhoneNumber")))}},{key:"firstUpdated",value:function(e){s(n(l.prototype),"firstUpdated",this).call(this,e)}},{key:"_resetCorrectArea",value:function(){var e=this;setTimeout((function(){e.correctAreaId=void 0,e.correctAreaName=void 0,e.close()}),100)}},{key:"_loginCompleted",value:function(){this.onLoginFunction(),this.close()}},{key:"open",value:function(e,t,o){this.onLoginFunction=o,this.areaId=e,this.areaName=t,this.userSpinner=!1,this.opened=!1,this.smsNumber="",this.$$("#dialog").open()}},{key:"_validateAndSend",value:function(e){var t=this;if(this.smsCodeSent)return this.smsCode=this.$$("#smsCode").value,this.smsCode?(fetch("/votes/sms_login",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({smsCode:this.smsCode})}).then((function(e){return e.json()})).then((function(e){e&&!0===e.ok?t._loginCompleted():t.fire("oav-error",t.localize("error_not_authorized"))})).catch((function(){t.fire("oav-error",t.localize("general_error"))})),!0):(this.fire("oav-error",this.localize("completeForm")),!1);this.smsNumber=this.$$("#smsNumber").value;var o,r=this.$$("#yearOfBirth").value;return r&&!isNaN(r)&&(o=parseInt(r)),!o||o<this.configFromServer.client_config.lowSecuritySmsLoginMinYearOfBirth||o>this.configFromServer.client_config.lowSecuritySmsLoginMaxYearOfBirth?(this.fire("oav-error",this.localize("lowSecuritySmsLoginAgeError")),!1):this.smsNumber?this.smsNumber.length>6?(fetch("/votes/send_sms_login_code",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({smsNumber:this.smsNumber})}).then((function(e){return e.json()})).then((function(e){e&&!0===e.ok?t.smsCodeSent=!0:t.fire("oav-error",t.localize("error_not_authorized"))})).catch((function(){t.fire("oav-error",t.localize("general_error"))})),!0):(this.fire("oav-error",this.localize("enterValidPhoneNumber")),!1):(this.fire("oav-error",this.localize("completeForm")),!1)}},{key:"close",value:function(){var e=this.$$("#dialog");e&&e.close(),this.opened=!1,this.userSpinner=!1}}],[{key:"styles",get:function(){return[k]}}]),l}(c)),u([h({type:Object})],T.prototype,"configFromServer",void 0),u([h({type:Number})],T.prototype,"correctAreaId",void 0),u([h({type:String})],T.prototype,"areaName",void 0),u([h({type:String})],T.prototype,"correctAreaName",void 0),u([h({type:String})],T.prototype,"smsNumber",void 0),u([h({type:Boolean})],T.prototype,"userSpinner",void 0),u([h({type:String})],T.prototype,"smsErrorMessage",void 0),u([h({type:String})],T.prototype,"smsCodeErrorMessage",void 0),u([h({type:String})],T.prototype,"submitText",void 0),u([h({type:Object})],T.prototype,"onLoginFunction",void 0),u([h({type:Number})],T.prototype,"areaId",void 0),u([h({type:String})],T.prototype,"smsCode",void 0),u([h({type:Boolean})],T.prototype,"opened",void 0),u([h({type:Boolean})],T.prototype,"smsCodeSent",void 0),e("OavLowSecuritySmsLogin",T=u([m("oav-low-security-sms-login")],T))}}}));
